<!DOCTYPE html>
<html lang="en">
  <head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="../../assets/ico/favicon.ico">

    <title>Core Tracks</title>

    <!-- Bootstrap core CSS -->
    <link href="/static/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="/static/bootstrap/css/helper.css" rel="stylesheet">

    <!-- d3.js -->
    <script src="/static/d3/d3.min.js" charset="utf-8"></script>
    <script src="/static/d3-tip/d3-tip.js" charset="utf-8"></script>
    <!--<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>-->

    <!-- jQuery -->
    <script src="/static/jQuery/jquery-1.9.1.js" charset="utf-8"></script>
    <!--<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
    <script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>-->

    <!-- standards file -->
    <script src="/static/js/standards.js" charset="utf-8"></script>

    <style type="text/css">
      .axis {font-family: Roboto,Arial; font-size:26px;}
      .axis path, .axis line {fill: none;stroke: #000;shape-rendering: crispEdges;}
      .myText {shape-rendering: crispEdges;font-family: Roboto; font-size: 16px}
      .d3-tip {
        line-height: 1;
        font-family: arial,helvetica,sans-serif;
        font-weight: bold;
        padding: 12px;
        background: rgba(0, 0, 0, 0.8);
        color: #fff;
        border-radius: 2px;
      }
      .hovered {stroke: black;stroke-width: 2px;fill-opacity:.8;}
      .clicked text {fill-opacity:.8;}
      .clicked rect {fill-opacity:.8;stroke: black;stroke-width: 2.5px;}
    </style>

  </head>

  <body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Pony Express Elementary</a>
        </div>
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav" style="float:right">
            <!-- <li class="active"><a href="#">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#contact">Contact</a></li> -->
            <li><a href="#">Julia Fonoimoana</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>

    <div class="container">
        <div id="page-wrapper">

            <!-- <div class="row">
                <div class = "col-lg-12">
                    <h3 class = "page-header">Grade Level Dashboard</h3>
                </div>
            </div> -->

            <div class="row" style="margin-top:20px">
                <!-- domain -->
                <div class="col-lg-8">
                    <!-- grade level columns -->
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <i class="fa fa-bar-chart-o fa-fw"></i><b>Standards Progess</b>
                        </div>
                        <!-- /.panel-heading -->
                        <div class="panel-body" style="height:350px">
                            <div id='standards'></div>
                            <div id='description'></div>
                        </div>
                        <!-- /.panel-body -->
                    </div>
                </div>
                
                <!-- standards mapped -->
                <div class="col-lg-4">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <i class="fa fa-bar-chart-o fa-fw"></i><b>Performance</b>
                        </div>
                        <!-- /.panel-heading -->
                        <div class="panel-body" style="height:350px">
                            <div id='strength' style="margin-bottom:15px"></div>
                            <div class="btn-group btn-group-justified">
                                <div class="btn-group">
                                    <button type="button" class="btn btn-default" style="background-color:#F8F8F8;">Julia<br>
                                        <h2 id="s-avg" ></h2>
                                    </button>
                                </div>
                                <div class="btn-group">
                                    <button type="button" class="btn btn-default" style="background-color:#F8F8F8">Class<br>
                                        <h2 id="c-avg" ></h2>
                                    </button>
                                </div>
                                <div class="btn-group">
                                    <button type="button" class="btn btn-default" style="background-color:#F8F8F8">Grade<br>
                                        <h2 id="g-avg" ></h2>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <!-- /.panel-body -->
                    </div>
                </div>
            </div> <!-- row 1 -->

            <div class = "row">                
                <!-- cluster -->
                <div class="col-lg-6">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <i class="fa fa-bar-chart-o fa-fw"></i><b>Assessments</b>
                        </div>
                        <!-- /.panel-heading -->
                        <div class="panel-body">
                            <div id='assessment'></div>
                        </div>
                        <!-- /.panel-body -->
                    </div>
                </div>
                <!-- cluster -->
             
                <div class="col-lg-3">
                    <ul class="list-group">
                        <li class="list-group-item"><img src="/static/imgs/lz.png" height="35" style="margin-top:10px"></li>
                        <li class="list-group-item" style="margin-top:-10px">
                            <a href="http://learnzillion.com/lessons/523-locate-benchmark-numbers-on-a-number-line">Locate benchmark numbers on a number line</a>
                        </li>
                        <li class="list-group-item">
                            <a href="http://learnzillion.com/lessons/524-round-numbers-to-the-leading-digit-using-a-number-line">Round numbers to the leading digit using a number line</a>
                        </li>
                        <li class="list-group-item">
                            <a href="http://learnzillion.com/lessons/525-round-numbers-to-a-specified-place-on-a-number-line">Round numbers to a specified place on a number line</a>
                        </li>
                        <li class="list-group-item">
                            <a href="http://learnzillion.com/lessons/526-round-9s-using-base-ten-blocks">Round 9's using base ten blocks</a>
                        </li>
                    </ul>
                </div>
                <div class="col-lg-3">
                    <ul class="list-group">
                      <li class="list-group-item"><img src="/static/imgs/khan.png" height="35" style="margin-left:0px"></li>
                      <li class="list-group-item">
                            <a href="https://www.khanacademy.org/exercise/rounding_whole_numbers">Rounding Whole Number Exercises - 200 practice questions</a>
                      </li>
                      <li class="list-group-item">
                            <a href="https://www.khanacademy.org/video/rounding-whole-numbers-1">Rounding Whole Numbers - Video Part 1</a>
                      </li>
                      <li class="list-group-item">
                            <a href="https://www.khanacademy.org/video/rounding-whole-numbers-2">Rounding Whole Numbers - Video Part 2</a>
                      </li>
                      <li class="list-group-item">
                            <a href="https://www.khanacademy.org/video/rounding-whole-numbers-3">Rounding Whole Numbers - Video Part 3</a>
                      </li>
                    </ul>
                </div>
                <!-- <a href="https://www.khanacademy.org/commoncore"><img src="/static/imgs/khan.png" height="35" style="margin-left:10px"></a><br><br>
                <a href="http://commoncore.pearsoned.com/"><img src="/static/imgs/pearson.png" height="35" style="margin-left:10px"></a><br><br>
                <a href="http://commoncore.pearsoned.com/"><img src="/static/imgs/sinet.jpg" height="35" style="margin-left:10px"></a><br><br>
                <a href="http://commoncore.pearsoned.com/"><img src="/static/imgs/mcgraw.png" height="35" style="margin-left:10px"></a><br><br>
                <a href="http://commoncore.pearsoned.com/"><img src="/static/imgs/lz.png" height="35" style="margin-left:10px"></a> -->
      
                        <!-- /.panel-body -->
          

            </div><!-- /row 2 -->

          
        </div><!-- /.page-wrapper -->
    </div><!-- /.container -->
    
<script type="text/javascript">

$('#description').text("Click on a standard for detail");
var selectedGrade = "4" // default

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// STRENGTH

var donutObj = {
    "4.NF.1": {
        data:[0,0,1,3],
        strength: '100%',
        classAvg: '85%',
        gradeAvg: '82%'
    },
    "4.NF.2": {
        data:[0,0,1,1],
        strength: '100%',
        classAvg: '89%',
        gradeAvg: '91%'
    },
    "4.NBT.1": {
        data:[0,0,0,1],
        strength: '100%',
        classAvg: '91%',
        gradeAvg: '87%'
    },
    "4.NBT.2": {
        data:[0,1,1,1],
        strength: '66%',
        classAvg: '82%',
        gradeAvg: '83%'
    },
    "4.NBT.3": {
        data:[2,0,0,0],
        strength: '0%',
        classAvg: '65%',
        gradeAvg: '75%'
    },
}


var dataset = {
  data: [2,1,3,6],
  strength: '75%',
  classAvg: '70%',
  gradeAvg: '74%'
};

var dWidth = $('#strength').width(),
    dHeight = dWidth * .62,
    radius = Math.min(dWidth, dHeight) / 5 * 3;

var color = d3.scale.ordinal().range(["#FF6600","#FF9900","#9ACD32","#698B22"]);

var pie = d3.layout.pie()
    .value(function(d){return d;})
    .sort(null);

var arc = d3.svg.arc()
    .innerRadius(radius - 53)
    .outerRadius(radius - 21);

var svg = d3.select("#strength").append("svg")
    .attr("width", dWidth)
    .attr("height", dHeight)
    .append("g")
    .attr("transform", "translate(" + dWidth / 2 + "," + dHeight / 2 + ")");
    
path = svg.selectAll("path")
    .data(pie(dataset.data))
  .enter().append("path")
    .attr("fill", function(d, i) { return color(d.data); })
    .attr("d", arc)
    .each(function(d) { this._current = d; }); // store the initial angles

dText  = svg.append("text").text(dataset.strength).style("font-size","50px").style("text-anchor","middle").attr("y",15)
$('#s-avg').text(dataset.strength)
$('#c-avg').text(dataset.classAvg)
$('#g-avg').text(dataset.gradeAvg)

function updateDonut(dataset){
    pct = d3.format('%')
    path.data(pie(dataset.data))
    path.transition().duration(750).attrTween("d", arcTween)
    dText.transition().duration(750).text(dataset.strength)
    $('#s-avg').text(dataset.strength)
    $('#c-avg').text(dataset.classAvg)
    $('#g-avg').text(dataset.gradeAvg)
    
    function arcTween(a) {
      var i = d3.interpolate(this._current, a);
      this._current = i(0);
      return function(t) {
        return arc(i(t));
      };
    }
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// ASSESSMENTS

var rData = [
                {"assessment":"Assessment","domain":"Domain","date":"Date","strength":"% Prof"},
                {"assessment":"PLC-Multiplication","domain":"3.OA","date":"1/7","strength":.6},
                {"assessment":"PLC-Division","domain":"3.OA","date":"1/14","strength":.85},
                {"assessment":"PLC-Variables","domain":"3.OA","date":"1/21","strength":.75},
                {"assessment":"PLC-Random Forest","domain":"3.OA","date":"1/28","strength":.65},
                {"assessment":"PLC-Clustering","domain":"3.NBT","date":"2/4","strength":.45},
                {"assessment":"PLC-Gradient Boosting","domain":"3.NBT","date":"2/11","strength":.35},
                {"assessment":"PLC-Regression","domain":"3.NBT","date":"2/18","strength":.4},
                {"assessment":"PLC-ANOVA","domain":"3.NBT","date":"2/25","strength":.55},
]

var rObj ={
            "4.NF.1":[
                    {"assessment":"Recognize fractions - area models","domain":"4.NF","standard":"4.NF.1","date":"9/1","strength":3,"classAvg":2.8},
                    {"assessment":"Recognize fractions - number lines","domain":"4.NF","standard":"4.NF.1","date":"9/8","strength":4,"classAvg":3.3},
                    {"assessment":"Generate fractions - area models","domain":"4.NF","standard":"4.NF.1","date":"9/15","strength":4,"classAvg":3.2},
                    {"assessment":"Generate fractions - number lines","domain":"4.NF","standard":"4.NF.1","date":"9/15","strength":4,"classAvg":3.6},
                ],
           "4.NF.2":[
                    {"assessment":"Compare fractions using 1/2","domain":"1.OA","standard":"4.NF.2","date":"9/22","strength":3,"classAvg":2.5},
                    {"assessment":"Compare fractions using whole","domain":"1.OA","date":"9/22","standard":"4.NF.2","strength":4,"classAvg":3.1},
                ],
           "4.NBT.1":[
                    {"assessment":"Place Value Chart - Large Numbers","domain":"2.OA","standard":"4.NBT.1","date":"9/29","strength":4,"classAvg":2.1},
                ],
           "4.NBT.2":[
                    {"assessment":"Numeric Form","domain":"Domain","standard":"4.NBT.2","date":"9/29","strength":4,"classAvg":3.8},
                    {"assessment":"Word Form","domain":"3.OA","standard":"4.NBT.2","date":"10/6","strength":3,"classAvg":3.1},
                    {"assessment":"Expanded Form","domain":"3.OA","standard":"4.NBT.2","date":"10/6","strength":2,"classAvg":3.2}
                ],
           "4.NBT.3":[
                    {"assessment":"Locate Numbers - Number Line","domain":"4.OA","standard":"4.NBT.3","date":"10/6","strength":1,"classAvg":1.7},
                    {"assessment":"Round Numbers - Number Line","domain":"4.OA","standard":"4.NBT.3","date":"10/6","strength":1,"classAvg":1.8},
                ],
           "4.MD.1":[
                    {"assessment":"PLC-Random Forest","domain":"5.OA","standard":"4.NBT.3","date":"1/28","strength":1,"classAvg":1.8},
                    {"assessment":"PLC-Clustering","domain":"5.NBT","standard":"4.NBT.3","date":"2/4","strength":1,"classAvg":1.8},
                    {"assessment":"PLC-Gradient Boosting","domain":"5.NBT","standard":"4.NBT.3","date":"2/11","strength":1,"classAvg":1.8},
                    {"assessment":"PLC-Regression","domain":"5.NBT","standard":"4.NBT.3","date":"2/18","strength":1,"classAvg":1.8},
                ],
           "4.MD.2":[
                    {"assessment":"PLC-Multiplication","domain":"3.OA","standard":"4.NBT.3","date":"1/7","strength":1,"classAvg":1.8},
                ],
           "4.MD.3":[
                    {"assessment":"Assessment","domain":"Domain","date":"Date","strength":"% Prof"},
                ],
           "4.MD.4":[
                    {"assessment":"Assessment","domain":"Domain","date":"Date","strength":"% Prof"},
                    {"assessment":"PLC-Multiplication","domain":"3.OA","date":"1/7","strength":.6},
                    {"assessment":"PLC-Multiplication","domain":"3.OA","date":"1/7","strength":.6},
                    {"assessment":"PLC-Multiplication","domain":"3.OA","date":"1/7","strength":.6},
                ],
           "4.G.1":[
                    {"assessment":"Assessment","domain":"Domain","date":"Date","strength":"% Prof"},
                    {"assessment":"PLC-Multiplication","domain":"3.OA","date":"1/7","strength":.6},
                    {"assessment":"PLC-Multiplication","domain":"3.OA","date":"1/7","strength":.6},
                    {"assessment":"PLC-Multiplication","domain":"3.OA","date":"1/7","strength":.6},
                    {"assessment":"PLC-Multiplication","domain":"3.OA","date":"1/7","strength":.6},
                ],
           "4.G.2":[
                    {"assessment":"Assessment","domain":"Domain","date":"Date","strength":"% Prof"},
                    {"assessment":"PLC-Multiplication","domain":"3.OA","date":"1/7","strength":.6},
                    {"assessment":"PLC-Multiplication","domain":"3.OA","date":"1/7","strength":.6},
                    {"assessment":"PLC-Multiplication","domain":"3.OA","date":"1/7","strength":.6},
                    {"assessment":"PLC-Multiplication","domain":"3.OA","date":"1/7","strength":.6},
                    {"assessment":"PLC-Multiplication","domain":"3.OA","date":"1/7","strength":.6},
                ],
}


var rWidth = $('#assessment').width(),rHeight = rWidth*.52, barHeight = 50, rAspect = rHeight/rWidth
var rSvg = d3.select("#assessment").append("svg")
    .attr("preserveAspectRatio", "xMidYMid")
    .attr("viewBox", "0 0 "+rWidth+" "+rHeight)
    .attr("width", rWidth)
    .attr("height", rWidth * rAspect );
var colSpacing = [0,.13,.30,.78,.90]
var pct = d3.format('%')
// make the new
var rHeaders = rSvg.selectAll("g.rHeaders").data(["Date","Standard","Assessment","Score","Class"]).enter().append("g")
    .attr("transform",function(d,i){return "translate("+(rWidth*colSpacing[i])+",15)"})
    .append("text").text(function(d){return d}).attr("fill","black").style("font-weight","bold")

function getAssessments(rData){
    // zap the old
    rSvg.selectAll("g").remove();

    // make the new
    var rHeaders = rSvg.selectAll("g.rHeaders").data(["Date","Standard","Assessment","Score","Class"]).enter().append("g")
        .attr("transform",function(d,i){return "translate("+(rWidth*colSpacing[i])+",15)"})
        .append("text").text(function(d){return d}).attr("fill","black").style("font-weight","bold")

    var rRows = rSvg.selectAll("g.rRows").data(rData).enter().append("g").attr("transform",function(d,i){return "translate(0,"+(60+(i*barHeight))+")"})
    var rDate = rRows.append("text")
        .text(function(d){return d.date})
        .attr("fill","black")
        .attr("fill-opacity",0)
        .attr("x",0)

    var rDomain = rRows.append("text")
        .text(function(d){return d.standard})
        .attr("fill","black")
        .attr("fill-opacity",0)
        .attr("x",rWidth*colSpacing[1])

    var rAssessment = rRows.append("text")
        .text(function(d){return d.assessment.replace("PLC","")})
        .attr("fill","black")
        .attr("fill-opacity",0)
        .attr("x",rWidth*colSpacing[2])

    var rClass = rRows.append("text")
        .text(function(d){return d.classAvg})
        .style("font-size","21px")
        .style("text-anchor","middle")
        .style("font-weight","bold")
        .attr("fill","black")
        .attr("fill-opacity",0)
        .attr("x",rWidth*colSpacing[4]*1.04)
        .attr("y",3)

    var rStrength = rRows.append("g")
        .attr("transform","translate(0,0)")

    var rCircle = rStrength.append("circle")
        .attr("cy",-5)
        .attr("r",barHeight*.45)
        .attr("fill",function(d,i){return colorMeTier(d.strength)})
        .attr("cx",0)
        .on("mouseover",function(d){d3.select(this).attr("stroke","black")})
        .on("mouseout",function(d){d3.select(this).attr("stroke","none")})

    var rStrengthText = rStrength.append("text")
        .text(function(d,i){return d.strength;})
        .style("font-size","21px")
        .style("font-weight","bold")
        .style("text-anchor","middle")
        .attr("fill-opacity",0)
        .attr("fill","white")
        .attr("y",3)

    rStrength
      .on("mouseover",function(d){d3.select(this).selectAll("circle").classed("hovered",true)})
      .on("mouseout",function(d){d3.select(this).selectAll("circle").classed("hovered",false)})
      .on("click",function(d,i){var x = d3.select(this).selectAll("circle"); 
                              rRows.selectAll("circle").classed("clicked",false);
                              x.classed("clicked",true);
                              //console.log(rObj[selectedGrade][i].assessment);
                              window.location.href = 'http://' + window.location.host + '/drill/'+ selectedGrade + "/" + rObj[selectedGrade][i].assessment;
                            })
    var mixUp = [7,2,5,1,0,6,4,3]
    var rDelay = function(d,i){return mixUp[i] * 75}


    rStrength.transition().duration(1000).attr("transform","translate("+rWidth*colSpacing[3]*1.05+",0)")
    rClass.transition().duration(1700).attr("fill-opacity",1)
    rDate.transition().duration(1700).attr("fill-opacity",1)
    rDomain.transition().duration(1700).attr("fill-opacity",1)
    rAssessment.transition().duration(1700).attr("fill-opacity",1)
    rStrengthText.transition().duration(2500).attr("fill-opacity",1)
}

getAssessments(rObj["4.NF.1"])

// window resize
$(window).resize(function() {
  var rWidth = $("#assessment").width();
  rSvg.attr("width", rWidth);
  rSvg.attr("height", rWidth * rAspect);
});

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// STANDARDS

var stWidth = $('#standards').width(), stHeight = stWidth*.3, stAspect = stHeight/stWidth
var stSvg = d3.select("#standards").append("svg").attr("width",stWidth).attr("height",stWidth * stAspect)
var stObj = {
    "K":[
            {"name":"K.NBT","description":"Numbers & Operations - Fractions","stData":[
                {"standard":"K.NBT.1","score":.83}]},
            {"name":"K.MD","description":"Measurement & Data","stData":[
                {"standard":"K.MD.1","score":.46},
                {"standard":"K.MD.2","score":.66},
                {"standard":"K.MD.3","score":.58}]},
            {"name":"K.OA","description":"Operations & Algebraic Thinking","stData":[
                {"standard":"K.OA.1","score":0},
                {"standard":"K.OA.2","score":0},
                {"standard":"K.OA.3","score":0},
                {"standard":"K.OA.4","score":0},
                {"standard":"K.OA.5","score":0}]},
            {"name":"K.CC","description":"Counting & Cardinality","stData":[
                {"standard":"K.CC.1","score":.70},
                {"standard":"K.CC.2","score":.62},
                {"standard":"K.CC.3","score":0},
                {"standard":"K.CC.4A","score":0},
                {"standard":"K.CC.4B","score":0},
                {"standard":"K.CC.4C","score":0},
                {"standard":"K.CC.5","score":0},
                {"standard":"K.CC.6","score":0},
                {"standard":"K.CC.7","score":0}]},
            {"name":"K.G","description":"Geometry","stData":[
                {"standard":"K.G.1","score":.59},
                {"standard":"K.G.2","score":.61},
                {"standard":"K.G.3","score":0},
                {"standard":"K.G.4","score":0},
                {"standard":"K.G.5","score":0},
                {"standard":"K.G.6","score":0}]}       
    ],
    "1":[
            {"name":"1.OA","description":"Operations & Algebraic Thinking","stData":[
                {"standard":"1.OA.1","score":.70},
                {"standard":"1.OA.2","score":.62},
                {"standard":"1.OA.3","score":.75},
                {"standard":"1.OA.4","score":.65},
                {"standard":"1.OA.5","score":.45},
                {"standard":"1.OA.6","score":0},
                {"standard":"1.OA.7","score":0},
                {"standard":"1.OA.8","score":0}]},
            {"name":"1.NBT","description":"Numbers & Operations - Fractions","stData":[
                {"standard":"1.NBT.1","score":.45},
                {"standard":"1.NBT.2A","score":.50},
                {"standard":"1.NBT.2B","score":.60},
                {"standard":"1.NBT.2C","score":.70},
                {"standard":"1.NBT.3","score":.80},
                {"standard":"1.NBT.4","score":0},
                {"standard":"1.NBT.5","score":0},
                {"standard":"1.NBT.6","score":0}]},
            {"name":"1.MD","description":"Measurement & Data","stData":[
                {"standard":"1.MD.1","score":.83},
                {"standard":"1.MD.2","score":0},
                {"standard":"1.MD.3","score":0},
                {"standard":"1.MD.4","score":0}]},
            {"name":"1.G","description":"Geometry","stData":[
                {"standard":"1.G.1","score":.46},
                {"standard":"1.G.2","score":.66},
                {"standard":"1.G.3","score":0}]}     
    ],
    "2":[
            {"name":"2.OA","description":"Operations & Algebraic Thinking","stData":[
                {"standard":"2.OA.1","score":.70},
                {"standard":"2.OA.2","score":.62},
                {"standard":"2.OA.3","score":0},
                {"standard":"2.OA.4","score":0}]},
            {"name":"2.NBT","description":"Number & Operations in Base Ten","stData":[
                {"standard":"2.NBT.1A","score":0},
                {"standard":"2.NBT.1B","score":0},
                {"standard":"2.NBT.2","score":0},
                {"standard":"2.NBT.3","score":0},
                {"standard":"2.NBT.4","score":0},
                {"standard":"2.NBT.5","score":0},
                {"standard":"2.NBT.6","score":0},
                {"standard":"2.NBT.7","score":0},
                {"standard":"2.NBT.8","score":0},
                {"standard":"2.NBT.9","score":0}]},
            {"name":"2.G","description":"Geometry","stData":[
                {"standard":"2.G.1","score":.83},
                {"standard":"2.G.2","score":.0},
                {"standard":"2.G.3","score":.0}]},
            {"name":"2.MD","description":"Measurement & Data","stData":[
                {"standard":"2.MD.1","score":.46},
                {"standard":"2.MD.2","score":.66},
                {"standard":"2.MD.3","score":.58},
                {"standard":"2.MD.4","score":.0},
                {"standard":"2.MD.5","score":.0},
                {"standard":"2.MD.6","score":.0},
                {"standard":"2.MD.7","score":.0},
                {"standard":"2.MD.8","score":.0},
                {"standard":"2.MD.9","score":.0},
                {"standard":"2.MD.10","score":.0}]},       
    ],
    "3":[
            {"name":"3.OA","description":"Operations & Algebraic Thinking","stData":[
                {"standard":"3.OA.1","score":.70},
                {"standard":"3.OA.2","score":.62},
                {"standard":"3.OA.3","score":0},
                {"standard":"3.OA.4","score":0},
                {"standard":"3.OA.5","score":0},
                {"standard":"3.OA.6","score":0},
                {"standard":"3.OA.7","score":0},
                {"standard":"3.OA.8","score":0},
                {"standard":"3.OA.9","score":0}]},
            {"name":"3.NBT","description":"Numbers & Operations in Base Ten","stData":[
                {"standard":"3.NBT.1","score":0},
                {"standard":"3.NBT.2","score":0},
                {"standard":"3.NBT.3","score":0}]},
            {"name":"3.NF","description":"Numbers & Operations - Fractions","stData":[
                {"standard":"3.NF.1","score":.83},
                {"standard":"3.NF.2A","score":.59},
                {"standard":"3.NF.2B","score":0},
                {"standard":"3.NF.3A","score":0},
                {"standard":"3.NF.3B","score":0},
                {"standard":"3.NF.3C","score":0},
                {"standard":"3.NF.3D","score":0}]},
            {"name":"3.MD","description":"Measurement & Data","stData":[
                {"standard":"3.MD.1","score":.46},
                {"standard":"3.MD.2","score":.66},
                {"standard":"3.MD.3","score":.58},
                {"standard":"3.MD.4","score":.62},
                {"standard":"3.MD.5A","score":0},
                {"standard":"3.MD.5B","score":0},
                {"standard":"3.MD.6","score":0},
                {"standard":"3.MD.7A","score":0},
                {"standard":"3.MD.7B","score":0},
                {"standard":"3.MD.7C","score":0},
                {"standard":"3.MD.7D","score":0},
                {"standard":"3.MD.8","score":0}]},
            {"name":"3.G","description":"Geometry","stData":[        
                {"standard":"3.G.1","score":.59},
                {"standard":"3.G.2","score":.61}]}
    ],
    "4":[
            {"name":"4.NF","description":"Numbers & Fractions","stData":[
                {"standard":"4.NF.1","score":.70},
                {"standard":"4.NF.2","score":.62},
                {"standard":"4.NF.3A","score":0},
                {"standard":"4.NF.3B","score":0},
                {"standard":"4.NF.3C","score":0},
                {"standard":"4.NF.3D","score":0},
                {"standard":"4.NF.4A","score":0},
                {"standard":"4.NF.4B","score":0},
                {"standard":"4.NF.4C","score":0},
                {"standard":"4.NF.5","score":0},
                {"standard":"4.NF.6","score":0},
                {"standard":"4.NF.7","score":0}]},
            {"name":"4.OA","description":"Operations & Algebraic Thinking","stData":[
                {"standard":"4.OA.1","score":0},
                {"standard":"4.OA.2","score":0},
                {"standard":"4.OA.3","score":0},
                {"standard":"4.OA.4","score":0},
                {"standard":"4.OA.5","score":0}]},
            {"name":"4.NBT","description":"Numbers & Operations In Base Ten","stData":[
                {"standard":"4.NBT.1","score":.83},
                {"standard":"4.NBT.2","score":.73},
                {"standard":"4.NBT.3","score":.33},
                {"standard":"4.NBT.4","score":0},
                {"standard":"4.NBT.5","score":0},
                {"standard":"4.NBT.6","score":0}]},
            {"name":"4.MD","description":"Measurement & Data","stData":[
                {"standard":"4.MD.1","score":.63},
                {"standard":"4.MD.2","score":.46},
                {"standard":"4.MD.3","score":.66},
                {"standard":"4.MD.4","score":.58},
                {"standard":"4.MD.5A","score":0},
                {"standard":"4.MD.5B","score":0},
                {"standard":"4.MD.6","score":0},
                {"standard":"4.MD.7","score":0}]},
            {"name":"4.G","description":"Geometry","stData":[
                {"standard":"4.G.1","score":.59},
                {"standard":"4.G.2","score":.61},
                {"standard":"4.G.3","score":0}]}       
    ],
    "5":[
            {"name":"5.NF","description":"Numbers & Fractions","stData":[
                {"standard":"5.NF.1","score":.70},
                {"standard":"5.NF.2","score":.62},
                {"standard":"5.NF.3","score":0},
                {"standard":"5.NF.4A","score":0},
                {"standard":"5.NF.4B","score":0},
                {"standard":"5.NF.5A","score":0},
                {"standard":"5.NF.5B","score":0},
                {"standard":"5.NF.6","score":0},
                {"standard":"5.NF.7A","score":0},
                {"standard":"5.NF.7B","score":0},
                {"standard":"5.NF.7C","score":0}]},
            {"name":"5.OA","description":"Operations & Algebraic Thinking","stData":[
                {"standard":"5.OA.1","score":0},
                {"standard":"5.OA.2","score":0},
                {"standard":"5.OA.3","score":0}]},
            {"name":"5.NBT","description":"Numbers & Operations - Fractions","stData":[
                {"standard":"5.NBT.1","score":.83},
                {"standard":"5.NBT.2","score":0},
                {"standard":"5.NBT.3A","score":0},
                {"standard":"5.NBT.3B","score":0},
                {"standard":"5.NBT.4","score":0},
                {"standard":"5.NBT.5","score":0},
                {"standard":"5.NBT.6","score":0},
                {"standard":"5.NBT.7","score":0}]},
            {"name":"5.MD","description":"Measurement & Data","stData":[
                {"standard":"5.MD.1","score":.83},
                {"standard":"5.MD.2","score":.83},
                {"standard":"5.MD.3A","score":0},
                {"standard":"5.MD.3B","score":0},
                {"standard":"5.MD.4","score":0},
                {"standard":"5.MD.5A","score":0},
                {"standard":"5.MD.5B","score":0},
                {"standard":"5.MD.5C","score":0}]},
            {"name":"5.G","description":"Geometry","stData":[
                {"standard":"5.G.1","score":0},
                {"standard":"5.G.2","score":0},
                {"standard":"5.G.3","score":0},
                {"standard":"5.G.4","score":0}]}       
    ],
    "6":[
            {"name":"6.SP","description":"Statistics and Probability","stData":[
                {"standard":"6.SP.1","score":.70},
                {"standard":"6.SP.2","score":.62},
                {"standard":"6.SP.3","score":0},
                {"standard":"6.SP.4","score":0},
                {"standard":"6.SP.5A","score":0},
                {"standard":"6.SP.5B","score":0},
                {"standard":"6.SP.5C","score":0},
                {"standard":"6.SP.5D","score":0}]},
            {"name":"6.RP","description":"Ratios and Proportional Relationships","stData":[
                {"standard":"6.RP.1","score":0},
                {"standard":"6.RP.2","score":0},
                {"standard":"6.RP.3A","score":0},
                {"standard":"6.RP.3B","score":0},
                {"standard":"6.RP.3C","score":0},
                {"standard":"6.RP.3D","score":0}]},
            {"name":"6.EE","description":"Expressions and Equations","stData":[
                {"standard":"6.EE.1","score":0},
                {"standard":"6.EE.2A","score":0},
                {"standard":"6.EE.2B","score":0},
                {"standard":"6.EE.2C","score":0},
                {"standard":"6.EE.3","score":0},
                {"standard":"6.EE.4","score":0},
                {"standard":"6.EE.5","score":0},
                {"standard":"6.EE.6","score":0},
                {"standard":"6.EE.7","score":0},
                {"standard":"6.EE.8","score":0},
                {"standard":"6.EE.9","score":0}]},
            {"name":"6.NS","description":"The Number System","stData":[
                {"standard":"6.NS.1","score":.50},
                {"standard":"6.NS.2","score":.60},
                {"standard":"6.NS.3","score":.70},
                {"standard":"6.NS.4","score":.80},
                {"standard":"6.NS.5","score":.90},
                {"standard":"6.NS.6A","score":0},
                {"standard":"6.NS.6B","score":0},
                {"standard":"6.NS.6C","score":0},
                {"standard":"6.NS.7A","score":0},
                {"standard":"6.NS.7B","score":0},
                {"standard":"6.NS.7C","score":0},
                {"standard":"6.NS.7D","score":0},
                {"standard":"6.NS.8","score":0},]},
            {"name":"6.G","description":"Geometry","stData":[
                {"standard":"6.G.1","score":.80},
                {"standard":"6.G.2","score":.85},
                {"standard":"6.G.3","score":.79},
                {"standard":"6.G.4","score":.90}]}       
    ],

}

// tooltip
// var tip = d3.tip().attr('class', 'd3-tip').html(function(d) { return d.description; }); // DOMAIN DESCRIPTION
// var stTip = d3.tip().attr('class', 'd3-tip').html(function(d) { return d.standard; }); // STANDARD NAME
// stSvg.call(tip)
// stSvg.call(stTip)

var clicked = false

function getStandards(standards){

    stSvg.selectAll("g").remove();

    var dcnt = standards.length

    var colHeaders = stSvg.selectAll("g.headers").data(standards).enter().append("g").attr("transform",function(d,i){return "translate("+i*stWidth/dcnt+",0)"})
/*    var text = colHeaders.append("text")
        .text(function(d){return d.description})
        .style("text-anchor","middle")
        .attr("y",30)
        .attr("x",stWidth/dcnt/2)
        .style("font-size","30px")*/
    var text = colHeaders.append("foreignObject")
        .attr("y",-50)
        .attr("x",3)
        .attr("height",100)
        .attr("width",stWidth/dcnt)
        .append("xhtml:body")
        .html(function(d){return '<div style="font-size:12px;"><center><b>'+d.description+'</b> ('+d.name+')</center></div>'})

    var cols = stSvg.selectAll("g.cols").data(standards).enter().append("g").attr("transform",function(d,i){return "translate("+(10+i*stWidth/dcnt)+",0)"})
    var standardBlocks = cols.selectAll("g.standards").data(function(d){return d.stData}).enter().append("g")
        .attr("transform",function(d,i){return "translate("+((i%3)*stHeight/dcnt)+","+((Math.ceil((i+1)/3))*(stHeight/dcnt))+")"})
    var bars = standardBlocks.append("rect")
        .attr("width",stHeight/(dcnt*1.02))
        .attr("height",stHeight/(dcnt*1.02))
        .attr("fill",function(d,i,j){return colorMe(d.score)})
        .attr("rx",6)
        .attr("ry",6)
        //.attr("x",function(d,i){return (i%3)*stHeight/dcnt})
        //.attr("y",function(d,i){return (Math.ceil((i+1)/3))*(stHeight/dcnt)})
        .attr("fill-opacity",.1)
    var barText = standardBlocks.append("text")
        .text(function(d){return d.standard})
        .style("text-anchor","middle")
        .style("font-size","10px")
        .attr("fill","black")
        .attr("fill-opacity",0)
        .attr("x",21)
        .attr("y",25)

    standardBlocks
        // .on("mouseover.tooltip",stTip.show)
        // .on("mouseout.tooltip",stTip.hide)
        .on("mouseover",function(d,i,j){
            d3.select(this).selectAll("rect").attr("stroke","black").attr("stroke-width","2px"); 
            d3.select(this).selectAll("text").attr("fill-opacity",1);  
        })
        .on("mouseout",function(d){
            d3.select(this).selectAll("rect").attr("stroke","none");
            d3.select(this).selectAll("text").attr("fill-opacity",0)
        })
        .on("click",function(d){
            var standard = d.standard;
            var domain = standard.slice(0,standard.lastIndexOf('.'));
            $('#description').html('<b>'+standard+'</b>: '+standardsObject[selectedGrade][domain][standard]); 
            standardBlocks.classed("clicked",false);
            d3.select(this).classed("clicked",true);
            getAssessments(rObj[standard]);
            updateDonut(donutObj[standard]);
        })

    var transition = bars.transition().duration(400),
        delay = function(d,i){return i*60};

    transition.delay(delay).attr("fill-opacity",1)//.attr("x",function(d,i){return buffer+i*rWidth*1.01})
}
getStandards(stObj[selectedGrade])
// window resize
$(window).resize(function() {
  var stWidth = $("#standards").width();
  stSvg.attr("width", stWidth);
  stSvg.attr("height", stWidth * stAspect);
});

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// FUNCTIONS

function colorMe(num){
    if(num===0){return "#DCDCDC"} // grey
    else if(num<=.5){return "#FF6600"} // orange
    else if(num>.5&&num<=.6){return "#FF9900"} // light orange
    else if(num>.6&&num<=.75){return "#9ACD32"} //light green
    else{return '#698B22'} // dark green
}

function colorMeTier(num){
    if(num===0){return "#DCDCDC"}
    else if(num<=1&&num>0){return "#FF6600"}
    else if(num<=2&&num>1){return "#FF9900"}
    else if(num<=3&&num>2){return "#9ACD32"}
    else{return '#698B22'}
}

// function httpGet(theUrl)
// {
//     var xmlHttp = null;

//     xmlHttp = new XMLHttpRequest();
//     xmlHttp.open( "GET", theUrl, false );
//     xmlHttp.send( null );
//     return xmlHttp.responseText;
// }
   
</script>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>-->
    <script src="static/bootstrap/js/bootstrap.min.js"></script>
    
  </body>
</html>
